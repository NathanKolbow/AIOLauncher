
<!DOCTYPE html>

<html>
    <link rel="stylesheet" href="settings.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-alpha.2/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-alpha.2/js/materialize.min.js"></script>
    <script defer src="js/scan.js"></script>
    <script defer src="settings.js"></script>

    <ul id="slide-out" class="sidenav sidenav-fixed" style="width: 150px;">
        <li><a href="#!">Manifests</a></li>

        <!-- Collapsible element START -->
        <ul class="collapsible">
            <li>
                <div class="collapsible-header"><i class="material-icons small">arrow_drop_down</i>Cloud</div>
                <div class="collapsible-body">
                    <ul>
                        <li><a href="#!">1. Hello!</a></li>
                        <li><a href="#!">2. Goodbye!</a></li>
                    </ul>
                </div>
            </li>
        </ul>
        <!-- Collapsible element END -->

        <li><a href="#!" onClick="const { remote } = require('electron'); remote.getCurrentWindow().loadFile(path.join(__dirname, 'index.html'));">Home</a></li>
    </ul>
    <a href="#" data-target="slide-out" class="sidenav-trigger show-on-large"></a>

    <body>
        <div class="row">
            <div class="col s12">
                <span class="flow-text" id="header">Manifests</span>   <a href="#" onClick="console.log('Click.')"><i class="tiny material-icons">help</i></a>
            </div>
        </div>
        <ul>
            <div class="file-field input-field">
                <div class="btn-flat">
                    <span>Folder</span>
                </div>
                <div class="file-path-wrapper">
                    <!-- TODO: Make onfocus for the button open up a folder select and make the onchange epic_check() change a button color to red/green based on validity -->
                    <input id="epic_directory" onblur="epic_check();" onfocus="epic_check();" onchange="epic_check();" type="text" class="validate">
                </div>
            </div>
            

            <button onClick="resolve_epic_backup('SpellBreak')" class="waves-effect waves-light btn">button</button>
            <button onClick="scan_epic('C:\\ProgramData\\Epic\\EpicGamesLauncher\\Data\\Manifests\\')" class="waves-effect waves-light btn">button</button>
            <li>First thing</li>
            <li>Second thing</li>
            <li>Third thing</li>
        </ul>
    </body>

    <!-- Code for enabling custom directory validation -->
    <script>
        document.getElementById('epic_directory').addEventListener('keyup', epic_check);
        function epic_check() {
            var ele = document.getElementById('epic_directory');
            if(!ele.value || !ele.value.length)
                return;
            
            if(fs.existsSync(ele.value)) {
                ele.classList.add("valid");
                ele.classList.remove("invalid");
            } else {
                ele.classList.remove("valid");
                ele.classList.add("invalid");
            }
        }
    </script>
</html>

<!-- Code for enabling the sidenav -->
<script>
    var elem = document.querySelector(".sidenav");
    var instance = new M.Sidenav(elem, {
        draggable: false,
        preventScrolling: false
    });

    var elem = document.querySelectorAll('.collapsible');
    console.log(elem);
    for(i = 0; i < elem.length; i++) {
        let _ = new M.Collapsible(elem[i], {
            accordion: false
        });
    }
</script>